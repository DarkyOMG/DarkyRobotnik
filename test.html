<!doctype html>
<html>

<head>
   <title>DarkyRobotnik Alerts</title>
   <link rel="stylesheet" href="styles.css">
</head>

<body>
   <figure>
      <audio></audio>
   </figure>
   <img src="test.png" alt="test">
</body>
<script type="text/javascript">
   const audioelem = document.querySelector("audio");
   const imageelem = document.querySelector("img");
   WebSocketTest()
   function WebSocketTest() {
      if ("WebSocket" in window) {

         // Let us open a web socket
         var ws = new WebSocket("wss://muskatnuss.duckdns.org");

         ws.onopen = function () {

            console.log("Connected to server!")
            alert("Connection is open!")
         };

         ws.onmessage = function (evt) {
            var received_msg = evt.data;
            console.log(received_msg);
            switch (received_msg) {
               case "raid":
                  audioelem.src = "Raid.wav";
                  imageelem.classList.remove("animthing");
                  imageelem.classList.add("animthing");
                  audioelem.play();
                  break;
               case "follow":
                  audioelem.src = "Follow.wav";
                  imageelem.classList.remove("animthing");
                  imageelem.classList.add("animthing");
                  audioelem.play();
                  break;
               default:
                  break;
            }
         };


         ws.onclose = function () {

            // websocket is closed.
            alert("Connection is closed!");
         };
      } else {

         // The browser doesn't support WebSocket
         alert("WebSocket NOT supported by your Browser!");
      }
   }
</script>

</html>